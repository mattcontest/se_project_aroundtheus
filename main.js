!function(){"use strict";class e{constructor(e,t,o){let{name:s,link:n}=e;this.name=s,this.link=n,this._cardSelector=t,this._handleImageClick=o}_setEventListeners(){this._deleteButton.addEventListener("click",(()=>{this._handleDeleteCard()})),this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({link:this.link,name:this.name})}))}_handleLikeIcon(){this._likeButton.classList.toggle("card__button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.cloneNode(!0).firstElementChild,this._likeButton=this._cardElement.querySelector(".card__button"),this._deleteButton=this._cardElement.querySelector(".card__button_delete"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._cardImage.src=this.link,this._cardImage.alt=this.name,this._cardTitle.textContent=this.name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){let{inputSelector:o,submitButtonSelector:s,inactiveButtonClass:n,inputErrorClass:r,errorClass:i}=e;this._inputSelector=o,this._submitButtonSelector=s,this._inactiveButtonClass=n,this._inputErrorClass=r,this._errorClass=i,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(){this._hasInvalidInput(this._inputElements)?this.disableSubmitButton():this.enableButton()}resetValidation(){this._toggleButtonState(),this._inputElements.forEach((e=>{this._hideInputError(e)}))}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._toggleButtonState(),this._checkInputValidity(e)}))}))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}enableValidation(){this._setEventListeners()}}class o{constructor(e){let{popupSelector:t}=e;this.popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._handleOverlayClose=this._handleOverlayClose.bind(this)}open(){this.popupElement.classList.add("modal_open"),document.addEventListener("keydown",this._handleEscClose)}close(){this.popupElement.classList.remove("modal_open"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleOverlayClose(e){e.target===this.popupElement&&this.close()}setEventListeners(){this.popupElement.querySelector(".modal__close").addEventListener("click",(()=>this.close())),this.popupElement.addEventListener("mousedown",this._handleOverlayClose)}}class s extends o{constructor(e,t){super({popupSelector:e}),this.popupForm=this.popupElement.querySelector(".modal__form"),this.button=this.popupForm.querySelector(".modal__btn_type_add"),this.hanldeFormSubmit=t}_getInputValues(){const e=this.popupForm.querySelectorAll(".modal__input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this.popupForm.addEventListener("submit",(e=>{e.preventDefault(),this.hanldeFormSubmit(this._getInputValues()),this.popupForm.reset(),this.close()})),this._isAdded=!0}}const n=[{name:"Yasmine Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],r={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__btn",inactiveButtonClass:"modal__btn_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},i=(document.querySelector(".profile__name"),document.querySelector("#profile--edit-button")),l=(document.querySelector(".profile__subtitle"),document.querySelector("#edit-modal").querySelector(".modal__container"),document.querySelector("#edit-modal")),a=(l.querySelector(".modal__close"),document.querySelector("#title__form")),c=document.querySelector("#description__form-edit"),u=(l.querySelector(".modal__btn"),document.querySelector("#picture-modal").querySelector(".modal__image-container"),document.querySelector(".modal__image"),document.querySelector(".modal__image-title"),document.querySelector(".modal__close_preview"),document.querySelector("#add-modal")),d=(u.querySelector(".modal__container"),document.querySelector(".profile__add-button")),m=(u.querySelector(".modal__close"),document.querySelector(".modal__form")),_=(document.querySelector(".modal__btn_type_add"),document.querySelector(".modal__form_card")),h=(u.querySelector(".modal__input_type_title"),u.querySelector(".modal__input_type_image"),document.forms["profile-form"],document.querySelector("#card__template").content.firstElementChild,document.querySelector(".cards__list"),new s("#edit-modal",(function(e){y.setUserInfo({profileNameData:e.title,profileJobData:e.description}),m.reset(),h.close()})));h.setEventListeners();const p=new s("#add-modal",(function(e){const t=b({name:e.title,link:e.description});_.reset(),E.addItem(t),f.disableSubmitButton(),p.close()}));p.setEventListeners();const S=new class extends o{constructor(e){super({popupSelector:e}),this._image=this.popupElement.querySelector(".modal__image"),this._cardTitle=this.popupElement.querySelector(".modal__image-title")}open(e){this._image.src=e.link,this._image.alt=e.name,this._cardTitle.textContent=e.name,super.open()}}("#picture-modal");S.setEventListeners();const y=new class{constructor(e){let{profileName:t,profileJob:o}=e;this.name=document.querySelector(t),this.job=document.querySelector(o)}getUserInfo(){return{name:this.name.textContent,description:this.job.textContent}}setUserInfo(e){let{profileNameData:t,profileJobData:o}=e;this.name.textContent=t,this.job.textContent=o}}({profileName:".profile__name",profileJob:".profile__subtitle"}),E=new class{constructor(e,t){let{items:o,renderer:s}=e;this._items=o,this._renderer=s,this._container=document.querySelector(t)}renderItems(e){e.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({initialCards:n,renderer:e=>{const t=b(e);E.addItem(t)}},".cards__list");function b(t){return new e(t,"#card__template",v).getView()}function v(e){S.open(e)}E.renderItems(n),i.addEventListener("click",(()=>{const{name:e,description:t}=y.getUserInfo();a.value=e,c.value=t,g.resetValidation(),g.disableSubmitButton(),h.open()})),d.addEventListener("click",(()=>{p.open()}));const f=new t(r,_),g=new t(r,m);f.enableValidation(),g.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxjQUFjMkcsRUFDM0MsQ0FFQU0sV0FBQUEsQ0FBWUwsR0FDVkEsRUFBTXBFLFNBQVMyQixJQUNibkYsS0FBSytILFVBQVU1QyxFQUFLLEdBRXhCLENBRUE4QixPQUFBQSxDQUFRaUIsR0FDTmxJLEtBQUtnSSxXQUFXRyxRQUFRRCxFQUMxQixHSHFEQSxDQUNFMUMsYUFBWSxFQUNacUMsU0FBV08sSUFDVCxNQUFNdEIsRUFBY0MsRUFBV3FCLEdBQy9CcEIsRUFBWUMsUUFBUUgsRUFBWSxHQUdwQyxnQkFTRixTQUFTQyxFQUFXTSxHQUVsQixPQURhLElBQUk1SCxFQUFLNEgsRUFBTSxrQkFBbUJ4SCxHQUNuQ2lCLFNBQ2QsQ0FFQSxTQUFTakIsRUFBaUJ3SCxHQUN4QkYsRUFBaUIvQyxLQUFLaUQsRUFDeEIsQ0FiQUwsRUFBWWlCLFlBQVl6QyxHQTRDeEJHLEVBQWtCdEYsaUJBQWlCLFNBQVMsS0FDMUMsTUFBTSxLQUFFUCxFQUFJLFlBQUU2RyxHQUFnQkwsRUFBU21CLGNBQ3ZDNUIsRUFBaUJULE1BQVF0RixFQUN6QmdHLEVBQXFCVixNQUFRdUIsRUFDN0IwQixFQUFzQjlFLGtCQUN0QjhFLEVBQXNCcEYsc0JBQ3RCa0QsRUFBaUIvQixNQUFNLElBR3pCNEIsRUFBVTNGLGlCQUFpQixTQUFTLEtBQ2xDdUcsRUFBYXhDLE1BQU0sSUFHckIsTUFBTThDLEVBQXVCLElBQUkxRixFQUFjaUUsRUFBUVMsR0FDakRtQyxFQUF3QixJQUFJN0csRUFBY2lFLEVBQVFRLEdBRXhEaUIsRUFBcUJyRCxtQkFDckJ3RSxFQUFzQnhFLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rIH0sIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5saW5rID0gbGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAvLyAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbl9kZWxldGVcIilcblxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgLy8gYWxlcnQodGhpcy5fbmFtZSArIFwiSXQncyB3b3JraW5nXCIpO1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgIH0pO1xuXG4gICAgLy8gdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAvLyAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvblwiKVxuXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IGxpbms6IHRoaXMubGluaywgbmFtZTogdGhpcy5uYW1lIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX2hhbmRsZUxpa2VJY29uKCkge1xuICAgIC8vIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgLy8gICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b25cIilcbiAgICAvLyAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICAvL1Jvb3QgRG9jdW1lbnRcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkuZmlyc3RFbGVtZW50Q2hpbGQ7XG5cbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b25cIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX2J1dHRvbl9kZWxldGVcIlxuICAgICk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLm5hbWU7XG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xuXG4gICAgLy8gY29uc29sZS5sb2codGhpcy5fY2FyZEVsZW1lbnQpO1xuXG4gICAgLy9nZXQgdGhlIGNhcmQgdmlld1xuICAgIC8vc2V0IGV2ZW50IGxpc3RlbmVyc1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgLy9yZXR1ciB0aGUgY2FyZFxuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoXG4gICAge1xuICAgICAgaW5wdXRTZWxlY3RvcixcbiAgICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yLFxuICAgICAgaW5hY3RpdmVCdXR0b25DbGFzcyxcbiAgICAgIGlucHV0RXJyb3JDbGFzcyxcbiAgICAgIGVycm9yQ2xhc3MsXG4gICAgfSxcbiAgICBmb3JtRWxlbWVudFxuICApIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBpbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICAvLyBjb25zb2xlLmxvZyhcIkknbSBhZGRpbmdcIiwgdGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAvLyBjb25zb2xlLmxvZyhcIkknbSBhbHNvIGFkZGluZ1wiLCBlcnJvck1lc3NhZ2UpO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgLy8gZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JNZXNzYWdlKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xuICAgIHJldHVybiAhaW5wdXRMaXN0LmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIGRpc2FibGVTdWJtaXRCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGVuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICAvL0NvbnRpbnVlIGZyb20gaGVyZVxuICAgIGNvbnN0IGZsYWcgPSB0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRFbGVtZW50cyk7XG5cbiAgICBpZiAoZmxhZykge1xuICAgICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW5hYmxlQnV0dG9uKCk7XG4gICAgfVxuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoZWwpO1xuICAgIH0pO1xuICAgIC8vIHRoaXMuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xuICAgIC8vIGNvbnNvbGUubG9nKFwiSXQgbG9nZ3MgdGlsbCBfY2hlY2tJbnB1dFZhbGlkaXR5XCIpO1xuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH1cbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIC8vIGNvbnNvbGUubG9nKFwiUG9wdXBzZWxlY3RvciByZWNlaXZlZCBpbiBQb3VwdXBcIiwgcG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIC8vIGNvbnNvbGUubG9nKFwiUG9wdXAgRWxlbWVudDpcIiwgdGhpcy5wb3B1cEVsZW1lbnQpO1xuICAgIC8vIGNvbnNvbGUubG9nKFwiQ2hlY2sgdGhpc1wiLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIikpO1xuICAgIC8vQmluZGluZyBoYW5kbGVFc2NDbG9zZSB0byBlbnN1cmUgaXRzIGZ1bmN0aW9uYWxpdGluZyB0aHJvdWdodCBQb3B1cFdpdGhGb3JtXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZSA9IHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICAvL29wZW5zIHBvcHVwXG4gICAgdGhpcy5wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5cIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgLy9jbG9zZXMgcG9wdXBcbiAgICB0aGlzLnBvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlblwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgLy9saXN0ZW5zIGZvciBlc2NhcGUgYnV0dG9uXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIC8vIGNvbnN0IG9wZW5Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfb3BlblwiKTtcbiAgICAgIC8vIHRoaXMuY2xvc2Uob3Blbk1vZGFsKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBfaGFuZGxlT3ZlcmxheUNsb3NlKGV2dCkge1xuICAgIGlmIChldnQudGFyZ2V0ID09PSB0aGlzLnBvcHVwRWxlbWVudCkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vc2V0cyBldmVudCBsaXN0ZW5lcnNcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuICAgIHRoaXMucG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgLy8gY29uc29sZS5sb2coXCJQb3B1cHdpdGhGb3JtICAtIFBvcHVwRWxlbWVudDpcIiwgdGhpcy5wb3B1cEVsZW1lbnQpO1xuICAgIHRoaXMucG9wdXBGb3JtID0gdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICAvLyBjb25zb2xlLmxvZyhcIlBvcHVwd2l0aEZvcm0gIC0gUG9wdXBFbGVtZW50OlwiLCB0aGlzLnBvcHVwRWxlbWVudCk7XG4gICAgLy8gdGhpcy5pbnB1dExpc3QgPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcbiAgICB0aGlzLmJ1dHRvbiA9IHRoaXMucG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J0bl90eXBlX2FkZFwiKTtcbiAgICB0aGlzLmhhbmxkZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0TGlzdCA9IHRoaXMucG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgZm9ybVZhbHVlc1tpdGVtLm5hbWVdID0gaXRlbS52YWx1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy9XaXRoIHN1cGVyIHdlIGFyZSBjYWxsaW5nIHRoZSBwYXJlbnQgY2xhc3Mgc2V0RXZlbnRMaXN0ZW5lcnMgd2hlbiBhdmFpbGFibGVcbiAgICAvLyBjb25zb2xlLmxvZyhcIlBvcHVwV2l0aEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMgY2FsbGVkXCIpO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLnBvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIkFkZGluZCB0aGlzIGZvciAgLT5cIiwgdGhpcy5wb3B1cEVsZW1lbnQpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLy9QYXNzaW5nIHRvIHRoZSBoYW5kbGVGb3JtU3ViLGl0IHRoZSBfZ2V0SW5wdXRWYWx1ZXMgKHdoaWNoIHJldHVybnMgZm9ybVZhbHVlcylcbiAgICAgIC8vUGFzc2luZyBlIHRvIHRoZSBoYW5kbGVGb3JtU3VibWl0XG4gICAgICB0aGlzLmhhbmxkZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICB0aGlzLnBvcHVwRm9ybS5yZXNldCgpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgLy8gdGhpcy5oYW5sZGVGb3JtU3VibWl0KGUpO1xuICAgIH0pO1xuICAgIHRoaXMuX2lzQWRkZWQgPSB0cnVlO1xuXG4gICAgLy8gY29uc29sZS5sb2coXCJMaXN0ZW5lciBhZGRlZC4gX2lzQWRkZWQgc2V0IHRvIHRydWUgZm9yXCIsIHRoaXMucG9wdXBFbGVtZW50KTtcbiAgICAvLyBjb25zb2xlLmxvZyhcIkNoZWNrIHRoaXMgaXMgYWRkZWRcIiwgdGhpcy5faXNBZGRlZCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllhc21pbmUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J0blwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idG5fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbi8vUHJvZmlsZSBFbGVtZW50c1xuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS0tZWRpdC1idXR0b25cIik7XG5jb25zdCBwcm9maWxlU3VidGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIpO1xuLy9Nb2RhbCBFbGVtZW50c1xuY29uc3QgZWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpO1xuY29uc3QgZWRpdE1vZGFsQ29udGFpbmVyID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NvbnRhaW5lclwiKTtcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XG5jb25zdCBwcm9maWxlTW9kYWxDbG9zZUJ1dHRvbiA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG5jb25zdCBwcm9maWxlTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0aXRsZV9fZm9ybVwiKTtcbmNvbnN0IHByb2ZpbGVTdWJ0aXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZXNjcmlwdGlvbl9fZm9ybS1lZGl0XCIpO1xuY29uc3QgcHJvZmlsZUVkaXRTYXZlQnV0dG9uID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idG5cIik7XG5cbi8vIEltYWdlIFByZXZpZXcgTW9kYWxcbmNvbnN0IHBpY3R1cmVQcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BpY3R1cmUtbW9kYWxcIik7XG5jb25zdCBtb2RhbFBpY3R1cmVDb250YWluZXIgPSBwaWN0dXJlUHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19pbWFnZS1jb250YWluZXJcIlxuKTtcbmNvbnN0IHByZXZpZXdDYXJkSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmNvbnN0IHByZXZpZXdDYXJkVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS10aXRsZVwiKTtcbmNvbnN0IHByZXZpZXdDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlX3ByZXZpZXdcIik7XG5cbi8vIEFkZCBNb2RhbCBFbGVtZW50c1xuY29uc3QgYWRkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1tb2RhbFwiKTtcbmNvbnN0IGFkZE1vZGFsQ29udGFpbmVyID0gYWRkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY29udGFpbmVyXCIpO1xuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuY29uc3QgYWRkQ2xvc2VCdXR0b24gPSBhZGRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcblxuLy9FZGl0IE1vZGFsIEZvcm1cbmNvbnN0IGVkaXRNb2RhbEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuXG4vL0Zvcm0gRGF0YVxuY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J0bl90eXBlX2FkZFwiKTtcbmNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybV9jYXJkXCIpO1xuY29uc3QgY2FyZFRpdGxlRm9ybSA9IGFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X3R5cGVfdGl0bGVcIik7XG5jb25zdCBjYXJkSW1hZ2VGb3JtID0gYWRkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXRfdHlwZV9pbWFnZVwiKTtcblxuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlLWZvcm1cIl07XG5jb25zdCBjYXJkVGVtcGxhdGUgPVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmRfX3RlbXBsYXRlXCIpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG5cbmNvbnN0IGNhcmRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcblxuZXhwb3J0IHtcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICBwcm9maWxlU3VidGl0bGUsXG4gIHByb2ZpbGVFZGl0Rm9ybSxcbiAgZWRpdE1vZGFsLFxuICBlZGl0TW9kYWxDb250YWluZXIsXG4gIGVkaXRQcm9maWxlTW9kYWwsXG4gIHByb2ZpbGVFZGl0U2F2ZUJ1dHRvbixcbiAgcHJvZmlsZU1vZGFsQ2xvc2VCdXR0b24sXG4gIHByb2ZpbGVOYW1lSW5wdXQsXG4gIHByb2ZpbGVTdWJ0aXRsZUlucHV0LFxuICBwaWN0dXJlUHJldmlld01vZGFsLFxuICBtb2RhbFBpY3R1cmVDb250YWluZXIsXG4gIHByZXZpZXdDYXJkSW1hZ2UsXG4gIHByZXZpZXdDYXJkVGl0bGUsXG4gIHByZXZpZXdDbG9zZUJ1dHRvbixcbiAgYWRkTW9kYWwsXG4gIGFkZE1vZGFsQ29udGFpbmVyLFxuICBhZGRCdXR0b24sXG4gIGFkZENsb3NlQnV0dG9uLFxuICBlZGl0TW9kYWxGb3JtLFxuICBhZGRDYXJkQnV0dG9uLFxuICBhZGRDYXJkRm9ybSxcbiAgY2FyZFRpdGxlRm9ybSxcbiAgY2FyZEltYWdlRm9ybSxcbiAgY2FyZFRlbXBsYXRlLFxuICBjYXJkTGlzdCxcbn07XG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG4vLyBpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCB7IGluaXRpYWxDYXJkcyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5pbXBvcnQge1xuICBwcm9maWxlTmFtZSxcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIHByb2ZpbGVTdWJ0aXRsZSxcbiAgZWRpdE1vZGFsLFxuICBlZGl0TW9kYWxDb250YWluZXIsXG4gIGVkaXRQcm9maWxlTW9kYWwsXG4gIHByb2ZpbGVFZGl0U2F2ZUJ1dHRvbixcbiAgcHJvZmlsZU1vZGFsQ2xvc2VCdXR0b24sXG4gIHByb2ZpbGVOYW1lSW5wdXQsXG4gIHByb2ZpbGVTdWJ0aXRsZUlucHV0LFxuICBwaWN0dXJlUHJldmlld01vZGFsLFxuICBtb2RhbFBpY3R1cmVDb250YWluZXIsXG4gIHByZXZpZXdDYXJkSW1hZ2UsXG4gIHByZXZpZXdDYXJkVGl0bGUsXG4gIHByZXZpZXdDbG9zZUJ1dHRvbixcbiAgYWRkTW9kYWwsXG4gIGFkZE1vZGFsQ29udGFpbmVyLFxuICBhZGRCdXR0b24sXG4gIGFkZENsb3NlQnV0dG9uLFxuICBlZGl0TW9kYWxGb3JtLFxuICBhZGRDYXJkQnV0dG9uLFxuICBhZGRDYXJkRm9ybSxcbiAgY2FyZFRpdGxlRm9ybSxcbiAgY2FyZEltYWdlRm9ybSxcbiAgcHJvZmlsZUVkaXRGb3JtLFxuICBjYXJkVGVtcGxhdGUsXG4gIGNhcmRMaXN0LFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbnN0YW50aWF0aW5nIENsYXNzZXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjZWRpdC1tb2RhbFwiLFxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdFxuKTtcbnByb2ZpbGVFZGl0TW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gY29uc3QgYWRkQ2FyZE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjYWRkLW1vZGFsXCIsIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KTtcbmNvbnN0IGFkZENhcmRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2FkZC1tb2RhbFwiLCBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdCk7XG5hZGRDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcHJldmlld0NhcmRNb2RhbCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwaWN0dXJlLW1vZGFsXCIpO1xucHJldmlld0NhcmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIHByb2ZpbGVOYW1lOiBcIi5wcm9maWxlX19uYW1lXCIsXG4gIHByb2ZpbGVKb2I6IFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIsXG59KTtcblxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgfSxcbiAgfSxcbiAgXCIuY2FyZHNfX2xpc3RcIlxuKTtcblxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGEsIFwiI2NhcmRfX3RlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2spO1xuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soZGF0YSkge1xuICBwcmV2aWV3Q2FyZE1vZGFsLm9wZW4oZGF0YSk7XG59XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50IEhhbmRsZXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoaW5wdXREYXRhKSB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICBwcm9maWxlTmFtZURhdGE6IGlucHV0RGF0YS50aXRsZSxcbiAgICBwcm9maWxlSm9iRGF0YTogaW5wdXREYXRhLmRlc2NyaXB0aW9uLFxuICB9KTtcbiAgLy9TdWJzdGl0dXRlZCBjbG9zZVBvcHVwIHdpdGggdGhlIGluc3RhbnRpYXRpb24gb2YgUG9wdXBXaXRoRm9ybVxuICBlZGl0TW9kYWxGb3JtLnJlc2V0KCk7XG4gIHByb2ZpbGVFZGl0TW9kYWwuY2xvc2UoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKHtcbiAgICBuYW1lOiBpbnB1dFZhbHVlcy50aXRsZSxcbiAgICBsaW5rOiBpbnB1dFZhbHVlcy5kZXNjcmlwdGlvbixcbiAgfSk7XG4gIGFkZENhcmRGb3JtLnJlc2V0KCk7XG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICBhZGRDYXJkRm9ybVZhbGlkYXRvci5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gIGFkZENhcmRNb2RhbC5jbG9zZSgpO1xufVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnQgTGlzdGVuZXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24gfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xuICBwcm9maWxlU3VidGl0bGVJbnB1dC52YWx1ZSA9IGRlc2NyaXB0aW9uO1xuICBlZGl0Q2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGVkaXRDYXJkRm9ybVZhbGlkYXRvci5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gIHByb2ZpbGVFZGl0TW9kYWwub3BlbigpO1xufSk7XG5cbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRDYXJkTW9kYWwub3BlbigpO1xufSk7XG5cbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBhZGRDYXJkRm9ybSk7XG5jb25zdCBlZGl0Q2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGVkaXRNb2RhbEZvcm0pO1xuXG5hZGRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5lZGl0Q2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgLy8gY29uc29sZS5sb2coXCJMb2cgdGhpc1wiLCBwb3B1cFNlbGVjdG9yKTtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgLy8gY29uc29sZS5sb2coXG4gICAgLy8gICBcIkxvZyB0aGlzIGFmdGVyIFN1cGVyIHdoaWNoIGlzIGJhc2ljYWxseSBjYWxsaW5nIFBvcHVwLmNvbnN0cnVjdG9yXCIsXG4gICAgLy8gICBwb3B1cFNlbGVjdG9yXG4gICAgLy8gKTtcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLXRpdGxlXCIpO1xuICB9XG5cbiAgb3BlbihkYXRhKSB7XG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgcHJvZmlsZU5hbWUsIHByb2ZpbGVKb2IgfSkge1xuICAgIHRoaXMubmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZU5hbWUpO1xuICAgIHRoaXMuam9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlSm9iKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLm5hbWUudGV4dENvbnRlbnQsXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5qb2IudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgcHJvZmlsZU5hbWVEYXRhLCBwcm9maWxlSm9iRGF0YSB9KSB7XG4gICAgdGhpcy5uYW1lLnRleHRDb250ZW50ID0gcHJvZmlsZU5hbWVEYXRhO1xuICAgIHRoaXMuam9iLnRleHRDb250ZW50ID0gcHJvZmlsZUpvYkRhdGE7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwibmFtZSIsImxpbmsiLCJ0aGlzIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2RlbGV0ZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9saWtlQnV0dG9uIiwiX2hhbmRsZUxpa2VJY29uIiwiX2NhcmRJbWFnZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsImdldFZpZXciLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJfY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2UiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2hhc0ludmFsaWRJbnB1dCIsImlucHV0TGlzdCIsImV2ZXJ5IiwidmFsaWRpdHkiLCJ2YWxpZCIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJlbmFibGVCdXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaW5wdXRFbGVtZW50cyIsInJlc2V0VmFsaWRhdGlvbiIsImZvckVhY2giLCJlbCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImVuYWJsZVZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJwb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX2hhbmRsZU92ZXJsYXlDbG9zZSIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJ0YXJnZXQiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJwb3B1cEZvcm0iLCJidXR0b24iLCJoYW5sZGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiZm9ybVZhbHVlcyIsIml0ZW0iLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXQiLCJfaXNBZGRlZCIsImluaXRpYWxDYXJkcyIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVFZGl0QnV0dG9uIiwiZWRpdFByb2ZpbGVNb2RhbCIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlU3VidGl0bGVJbnB1dCIsImFkZE1vZGFsIiwiYWRkQnV0dG9uIiwiZWRpdE1vZGFsRm9ybSIsImFkZENhcmRGb3JtIiwicHJvZmlsZUVkaXRNb2RhbCIsImZvcm1zIiwiaW5wdXREYXRhIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsInByb2ZpbGVOYW1lRGF0YSIsInRpdGxlIiwicHJvZmlsZUpvYkRhdGEiLCJkZXNjcmlwdGlvbiIsImFkZENhcmRNb2RhbCIsImlucHV0VmFsdWVzIiwiY2FyZEVsZW1lbnQiLCJjcmVhdGVDYXJkIiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwiYWRkQ2FyZEZvcm1WYWxpZGF0b3IiLCJwcmV2aWV3Q2FyZE1vZGFsIiwiX2ltYWdlIiwiZGF0YSIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUpvYiIsImpvYiIsImdldFVzZXJJbmZvIiwiX3JlZjIiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJlbGVtZW50IiwicHJlcGVuZCIsImNhcmREYXRhIiwiZWRpdENhcmRGb3JtVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==